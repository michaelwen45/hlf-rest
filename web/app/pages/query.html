
<h2>Invoke transaction</h2>

<form name="form" novalidate>

  <div class="form-group">
    <label>Channel</label>
    <select ng-model="selectedChannel" material-select watch ng-options="o.channel_id for o in ctl.channels" placeholder="Channel ID" required></select>
  </div>

  <div class="form-group">
    <label>Smart contract</label>
    <select ng-model="selectedCc" material-select watch ng-options="o.name+' ('+o.version+')' for o in ctl.chaincodes" placeholder="Contract ID" required></select>
  </div>

  <div class="form-group">
    <label for="fcn" class="col-sm-2 control-label">Function name</label>
    <div class="col-sm-10">
      <input type="text" class="form-control" id="fcn" placeholder="Function name" ng-model="fcn" required>
    </div>
  </div>

  <div class="form-group">
    <div class="input-field col s12 invalid">
      <textarea id="ccarguments" name="ccarguments"
        class="materialize-textarea" ng-class="{invalid:form.ccarguments.$invalid}"
        ng-model="args" validate-json></textarea>
      <label for="ccarguments">Function arguments (json)</label>
    </div>
    <div data-error="Invalid json" ng-class="{transparent:!form.ccarguments.$error.json}"></div>
  </div>

</form>

<div ng-hide="ctl.invokeInProgress">
  <button class="btn btn-primary" type="button" ng-click="ctl.invoke(selectedChannel, selectedCc, fcn, args)" ng-disabled="form.$invalid">Invoke</button>
  <button class="btn btn-flat" type="button" ng-click="fcn='move'; args='[&quot;a&quot;, &quot;b&quot;,&quot;10&quot;]'">Fill with sample values</button>
</div>

<div class="progress" ng-show="ctl.invokeInProgress">
    <div class="indeterminate"></div>
</div>

<!-- error (if any) -->
<div class="error" ng-show="ctl.error">
  <h2>Error</h2>
  <json-formatter open="2" json="ctl.error"></json-formatter>
</div>

<!-- transaction view -->
<div ng-show="ctl.transaction">
  <h2>Last transaction</h2>
  <!-- <cc-view json="ctl.transaction"></cc-view> -->
  <json-formatter open="2" json="ctl.transaction"></json-formatter>
</div>


<div style="height: 200px"></div>